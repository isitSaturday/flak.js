/*!
flak.js v0.1.0

MIT License
Developed by isitSaturday
Fri Sep 20 2013 11:39:38
*/
var Flak=Flak||{};Flak.TemplateView=Backbone.View.extend({templateName:null,initialize:function(a){if(a&&_.extend(this,_.pick(a,["templateName"])),this.templateName){var b='script[data-template-name="'+this.templateName+'"]';this.setTemplate(b)}},setTemplate:function(a){this.template=_.template(jQuery(a).html())},getMixins:function(){return{}},render:function(){this.trigger("pre.render");var a=_.extend(this.model.toJSON(),this.getMixins());return this.$el.html(this.template(a)),this.trigger("post.render"),this}}),Flak.StateView=Backbone.View.extend({states:{},initialState:"",currentState:null,currentStateName:"",initialize:function(a){a&&_.extend(this,_.pick(a,["states","initialState"])),this.transition(this.initialState)},transition:function(a){a!==this.currentStateName&&(null!==this.currentState&&(this.undelegateEvents(),_.isFunction(this.currentState.off)&&this.currentState.off.apply(this)),this.currentStateName=a,this.currentState=this.states[a],this.render(),_.isFunction(this.currentState.on)&&this.currentState.on.apply(this))},render:function(){return this.$el.html(this.currentState.template(data)),this},remove:function(){this.undelegateEvents(),Backbone.View.prototype.remove.call(this)}}),Flak.CollectionView=Backbone.View.extend({modelView:Backbone.View,rows:{},attachDirection:"append",initialize:function(a){this.collection&&(this.collection.on("add",this.add,this),this.collection.on("remove",this.remove,this)),a&&_.extend(this,_.pick(a,["modelView","attachDirection"]))},render:function(){return this.$el.html(""),this.collection.each(this.add,this),this},add:function(a){var b=new this.modelView({model:a});this.rows[a.id]=b,this.$el[this.attachDirection](b.render().el)},remove:function(a){var b=this.rows[a.id];b.$el.remove(),delete this.rows[a.id]}});